# é€šçŸ¥å…ˆæ‹¡å¤§ã®æŠ€è¡“çš„é¸æŠè‚¢

## èƒŒæ™¯

### ç¾çŠ¶ã®èª²é¡Œ
- ç¾åœ¨ã®é€šçŸ¥å…ˆ: Slacké™å®š
- å•é¡Œç‚¹: ãƒ¦ãƒ¼ã‚¶ãƒ¼æœ¬äººä»¥å¤–ãŒè¦‹ãªã„
- å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼: å¦»ã€ç¥–æ¯
- ä½¿ç”¨ç«¯æœ«: iPhone/Androidæ··åœ¨

### è¦ä»¶
1. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**: iOS/Androidä¸¡å¯¾å¿œ
2. **å°å…¥ã‚³ã‚¹ãƒˆã®ä½ã•**: æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç°¡å˜ã«åˆ©ç”¨é–‹å§‹ã§ãã‚‹
3. **é‹ç”¨ã‚³ã‚¹ãƒˆã®ä½ã•**: ä¿å®ˆãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå®¹æ˜“
4. **æ—¢å­˜å®Ÿè£…ã¨ã®çµ±åˆ**: ç¾åœ¨ã®`Notifier`ãƒãƒ¼ãƒˆ(v2/domain/ports.py)ã«æº–æ‹ 

---

## æŠ€è¡“é¸æŠè‚¢ã®æ¯”è¼ƒ

### 1. LINE Notify

#### æ¦‚è¦
LINEã®å…¬å¼é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã€‚å€‹äººã®LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é€šçŸ¥ã‚’é€ä¿¡ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **å°å…¥ã‚³ã‚¹ãƒˆæ¥µå°**: æ—¥æœ¬ã§ã¯ã»ã¼å…¨å“¡ãŒLINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä¿æœ‰
- âœ… **æŠ€è¡“çš„ãƒãƒ¼ãƒ‰ãƒ«ä½**: ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œã®ã¿ã§åˆ©ç”¨å¯èƒ½
- âœ… **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS/Androidå®Œå…¨å¯¾å¿œ
- âœ… **å®Ÿè£…ãŒå˜ç´”**: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ1å›ã§é€šçŸ¥å®Œäº†
- âœ… **ç„¡æ–™**: å®Œå…¨ç„¡æ–™ã§åˆ©ç”¨å¯èƒ½
- âœ… **æ—¢å­˜å®Ÿè£…ã¨ã®è¦ªå’Œæ€§**: Slack Notifierã¨åŒã˜æ§‹é€ ã§å®Ÿè£…å¯èƒ½

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **ä¸€æ–¹å‘é€šçŸ¥ã®ã¿**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¿”ä¿¡ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸å¯
- âŒ **ã‚°ãƒ«ãƒ¼ãƒ—é€šçŸ¥ã«åˆ¶é™**: å€‹åˆ¥ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦(ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«è¨­å®š)
- âŒ **LINEä¾å­˜**: LINEã‚µãƒ¼ãƒ“ã‚¹åœæ­¢æ™‚ã«å½±éŸ¿ã‚’å—ã‘ã‚‹
- âš ï¸ **UIã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºåˆ¶é™**: ãƒ†ã‚­ã‚¹ãƒˆ+ç”»åƒã®ã¿ã€ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ãªã—

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜†â˜†â˜†â˜† (æ¥µã‚ã¦å®¹æ˜“)**

```python
# å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸
class LineNotifier(Notifier):
    def __init__(self, access_token: str):
        self._token = access_token

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        message = self._build_message(filename, summary, events, tasks, file_link)
        requests.post(
            'https://notify-api.line.me/api/notify',
            headers={'Authorization': f'Bearer {self._token}'},
            data={'message': message}
        )
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«1ãƒˆãƒ¼ã‚¯ãƒ³å¿…è¦
- ä¿å®ˆ: APIä»•æ§˜ãŒå®‰å®šã—ã¦ãŠã‚Šã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é »åº¦ä½

---

### 2. Firebase Cloud Messaging (FCM)

#### æ¦‚è¦
GoogleãŒæä¾›ã™ã‚‹ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **å®Œå…¨ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS/Android/Webå¯¾å¿œ
- âœ… **ç„¡æ–™**: åˆ¶é™ãªãç„¡æ–™åˆ©ç”¨å¯èƒ½
- âœ… **é«˜åº¦ãªæ©Ÿèƒ½**: ãƒªãƒƒãƒé€šçŸ¥ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãªã©
- âœ… **ä¿¡é ¼æ€§**: Googleã®ã‚¤ãƒ³ãƒ•ãƒ©ã§é«˜å¯ç”¨æ€§
- âœ… **ãƒˆãƒ”ãƒƒã‚¯æ©Ÿèƒ½**: è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ä¸€æ–‰é…ä¿¡ãŒå®¹æ˜“

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **å°‚ç”¨ã‚¢ãƒ—ãƒªãŒå¿…è¦**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªé–‹ç™ºãŒå¿…é ˆ
- âŒ **å°å…¥ã‚³ã‚¹ãƒˆé«˜**: ã‚¢ãƒ—ãƒªé–‹ç™ºãƒ»é…å¸ƒãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦
- âŒ **æŠ€è¡“çš„ãƒãƒ¼ãƒ‰ãƒ«é«˜**: iOS(APNsè¨¼æ˜æ›¸)ã€Androidè¨­å®šãŒå¿…è¦
- âŒ **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•™è‚²ã‚³ã‚¹ãƒˆ**: ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»é€šçŸ¥è¨±å¯ã®èª¬æ˜ãŒå¿…è¦
- âš ï¸ **ä¿å®ˆã‚³ã‚¹ãƒˆ**: ã‚¢ãƒ—ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€OSå¯¾å¿œãŒç¶™ç¶šçš„ã«å¿…è¦

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜…â˜…â˜… (éå¸¸ã«å›°é›£)**

- ã‚µãƒ¼ãƒãƒ¼å´: Python SDKã§å®Ÿè£…å¯èƒ½(ä¸­ç¨‹åº¦)
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: Swift(iOS) + Kotlin(Android)ã®2ç¨®é¡ã®ã‚¢ãƒ—ãƒªé–‹ç™ºãŒå¿…é ˆ
- é…å¸ƒ: Apple Developer Program($99/å¹´) + Google Play Console($25è²·ã„åˆ‡ã‚Š)

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- ã‚¢ãƒ—ãƒªä¿å®ˆ: OSã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¯¾å¿œã€ãƒã‚°ä¿®æ­£
- è¨¼æ˜æ›¸ç®¡ç†: APNsè¨¼æ˜æ›¸ã®æ›´æ–°(å¹´1å›)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆ: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

### 3. Email (Gmail API / SendGrid)

#### æ¦‚è¦
ãƒ¡ãƒ¼ãƒ«ã§ã®é€šçŸ¥ã€‚Gmail APIã¾ãŸã¯SendGridãªã©ã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **å°å…¥ã‚³ã‚¹ãƒˆæ¥µå°**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿æœ‰
- âœ… **å®Œå…¨ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: ã™ã¹ã¦ã®ç«¯æœ«ã§å—ä¿¡å¯èƒ½
- âœ… **æŠ€è¡“çš„ãƒãƒ¼ãƒ‰ãƒ«ä½**: SMTP/APIã§ç°¡å˜ã«é€ä¿¡å¯èƒ½
- âœ… **æ—¢å­˜å®Ÿè£…ã¨ã®è¦ªå’Œæ€§**: Notifierãƒãƒ¼ãƒˆã«å®¹æ˜“ã«å®Ÿè£…å¯èƒ½
- âœ… **ãƒªãƒƒãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: HTMLå½¢å¼ã§è‡ªç”±ãªè¡¨ç¾ãŒå¯èƒ½

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **å³æ™‚æ€§ã®æ¬ å¦‚**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã¨æ¯”è¼ƒã—ã¦æ°—ã¥ãã«ãã„
- âŒ **è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«åˆ¤å®šãƒªã‚¹ã‚¯**: å—ä¿¡è¨­å®šã«ã‚ˆã£ã¦ã¯å±Šã‹ãªã„å¯èƒ½æ€§
- âš ï¸ **é€šçŸ¥å„ªå…ˆåº¦ä½**: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã®é€šçŸ¥è¨­å®šã«ä¾å­˜
- âš ï¸ **é€ä¿¡åˆ¶é™**: Gmail APIã¯1æ—¥500é€šã®åˆ¶é™ã‚ã‚Š(SendGridã¯æœ‰æ–™ãƒ—ãƒ©ãƒ³ã§æ‹¡å¼µå¯)

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜†â˜†â˜† (å®¹æ˜“)**

Gmail APIä½¿ç”¨ã®å ´åˆ:
```python
class EmailNotifier(Notifier):
    def __init__(self, credentials: Credentials, to_addresses: list[str]):
        self._service = build('gmail', 'v1', credentials=credentials)
        self._to_addresses = to_addresses

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        message = self._build_html_message(filename, summary, events, tasks, file_link)
        for to_addr in self._to_addresses:
            self._send_email(to_addr, subject, message)
```

SendGridä½¿ç”¨ã®å ´åˆ:
```python
class SendGridNotifier(Notifier):
    def __init__(self, api_key: str, to_addresses: list[str]):
        self._sg = SendGridAPIClient(api_key)
        self._to_addresses = to_addresses

    def notify_file_processed(self, ...):
        # SendGrid APIã§é€ä¿¡
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- **Gmail API**: ç„¡æ–™ã€OAuthèªè¨¼ã®å®šæœŸçš„ãªæ›´æ–°ãŒå¿…è¦
- **SendGrid**: æœˆ100é€šã¾ã§ç„¡æ–™ã€ãã‚Œä»¥ä¸Šã¯å¾“é‡èª²é‡‘($14.95~/æœˆ)

---

### 4. SMS (Twilio / AWS SNS)

#### æ¦‚è¦
é›»è©±ç•ªå·ã¸ã®SMSé€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **å°å…¥ã‚³ã‚¹ãƒˆæ¥µå°**: é›»è©±ç•ªå·ã®ã¿ã§åˆ©ç”¨å¯èƒ½
- âœ… **ç¢ºå®Ÿãªåˆ°é”**: ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã€å¿…ãšå±Šã
- âœ… **å®Œå…¨ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: ã™ã¹ã¦ã®æºå¸¯ç«¯æœ«ã§å—ä¿¡å¯èƒ½
- âœ… **é«˜ã„é–‹å°ç‡**: SMSã®é–‹å°ç‡ã¯98%ã¨é«˜ã„

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **ã‚³ã‚¹ãƒˆãŒé«˜ã„**: 1é€šã‚ãŸã‚Š7-10å††ç¨‹åº¦(Twilioæ—¥æœ¬å›½å†…)
- âŒ **æ–‡å­—æ•°åˆ¶é™**: å…¨è§’70æ–‡å­—ã¾ã§(è¤‡æ•°SMSã«ã™ã‚‹ã¨é«˜é¡åŒ–)
- âŒ **ãƒªãƒƒãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸å¯**: ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã€ãƒªãƒ³ã‚¯ã‚‚çŸ­ç¸®å¿…é ˆ
- âŒ **é›»è©±ç•ªå·ç®¡ç†**: ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æƒ…å ±ã®å–ã‚Šæ‰±ã„ã«æ³¨æ„

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜†â˜†â˜† (å®¹æ˜“)**

```python
class TwilioSMSNotifier(Notifier):
    def __init__(self, account_sid: str, auth_token: str, from_number: str, to_numbers: list[str]):
        self._client = Client(account_sid, auth_token)
        self._from_number = from_number
        self._to_numbers = to_numbers

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        # 70æ–‡å­—ä»¥å†…ã«è¦ç´„
        message = f"{filename}å‡¦ç†å®Œäº†ã€‚{len(events)}ä»¶ã‚¤ãƒ™ãƒ³ãƒˆã€{len(tasks)}ä»¶ã‚¿ã‚¹ã‚¯ä½œæˆã€‚"
        for to_number in self._to_numbers:
            self._client.messages.create(
                body=message,
                from_=self._from_number,
                to=to_number
            )
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- **Twilio**: æœˆé¡æ–™é‡‘ãªã—ã€å¾“é‡èª²é‡‘(1é€šç´„7å††)
- **AWS SNS**: 1é€šç´„10å††ã€AWSåˆ©ç”¨æ–™ãŒåˆ¥é€”ç™ºç”Ÿ
- **æœˆé–“æƒ³å®šã‚³ã‚¹ãƒˆ**: 1æ—¥1é€šÃ—30æ—¥Ã—2äºº=420å††/æœˆ

---

### 5. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (Messaging API)

#### æ¦‚è¦
LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€Messaging APIã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **LINE Notifyã‚ˆã‚Šé«˜æ©Ÿèƒ½**: ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã€ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ—ãƒ©ã‚¤ãªã©
- âœ… **åŒæ–¹å‘å¯¾å¿œå¯**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¿”ä¿¡ã‚’å—ä¿¡ãƒ»å‡¦ç†å¯èƒ½
- âœ… **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS/Androidå®Œå…¨å¯¾å¿œ
- âœ… **å°å…¥ã‚³ã‚¹ãƒˆä½**: LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚Œã°å‹ã ã¡è¿½åŠ ã®ã¿

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **ç„¡æ–™æ ãŒé™å®šçš„**: æœˆ200é€šã¾ã§ç„¡æ–™ã€ä»¥é™ã¯å¾“é‡èª²é‡‘
- âŒ **åˆæœŸè¨­å®šãŒè¤‡é›‘**: LINE Developersç™»éŒ²ã€Webhookã‚µãƒ¼ãƒãƒ¼è¨­å®šãªã©
- âŒ **å‹ã ã¡è¿½åŠ ãŒå¿…è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‹ã ã¡è¿½åŠ ã™ã‚‹æ‰‹é–“
- âš ï¸ **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡åˆ¶é™**: ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆé…ä¿¡ã¯æœ‰æ–™ãƒ—ãƒ©ãƒ³ã®ã¿

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜…â˜†â˜† (ä¸­ç¨‹åº¦)**

```python
class LineMessagingNotifier(Notifier):
    def __init__(self, channel_access_token: str, user_ids: list[str]):
        self._api = LineBotApi(channel_access_token)
        self._user_ids = user_ids

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        # Flex Messageã§è¦‹ã‚„ã™ãæ•´å½¢å¯èƒ½
        message = self._build_flex_message(filename, summary, events, tasks, file_link)
        for user_id in self._user_ids:
            self._api.push_message(user_id, message)
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- æœˆ200é€šã¾ã§ç„¡æ–™
- 201é€šä»¥é™: ~5å††/é€š(å¾“é‡èª²é‡‘)
- **æœˆé–“æƒ³å®šã‚³ã‚¹ãƒˆ**: 1æ—¥1é€šÃ—30æ—¥Ã—2äºº=60é€š â†’ ç„¡æ–™æ å†…

---

## æ¨å¥¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°

### ğŸ¥‡ 1ä½: LINE Notify
**ç·åˆè©•ä¾¡: â˜…â˜…â˜…â˜…â˜…**

#### ç†ç”±
- **å°å…¥ã‚³ã‚¹ãƒˆ**: ã»ã¼ã‚¼ãƒ­(æ—¢å­˜LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿)
- **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: æœ€å°(1-2æ™‚é–“ã§å®Œæˆ)
- **é‹ç”¨ã‚³ã‚¹ãƒˆ**: ç„¡æ–™ã€ä¿å®ˆä¸è¦
- **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ**: Slack Notifierã¨åŒã˜æ§‹é€ ã§å®Ÿè£…å¯èƒ½

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥è¨­å®šæ–¹æ³•
1. å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒLINE Notifyã«ã‚¢ã‚¯ã‚»ã‚¹: https://notify-bot.line.me/
2. ã€Œãƒã‚¤ãƒšãƒ¼ã‚¸ã€â†’ã€Œãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ã€
3. ãƒˆãƒ¼ã‚¯ãƒ³åã‚’å…¥åŠ›(ä¾‹: ã€Œå­¦æ ¡é€šçŸ¥ã€)ã€é€šçŸ¥å…ˆãƒˆãƒ¼ã‚¯ãƒ«ãƒ¼ãƒ ã‚’é¸æŠ
4. ç™ºè¡Œã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç®¡ç†è€…ã«å…±æœ‰
5. ç®¡ç†è€…ãŒç’°å¢ƒå¤‰æ•°ã¾ãŸã¯Google Sheetsã«è¨­å®š

#### å®Ÿè£…ã‚¿ã‚¹ã‚¯(åˆ¥é€”å®šç¾©)
- `LineNotifier`ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
- è¤‡æ•°ãƒˆãƒ¼ã‚¯ãƒ³å¯¾å¿œ(å¦»ç”¨ãƒ»ç¥–æ¯ç”¨)
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒˆãƒ¼ã‚¯ãƒ³è¿½åŠ æ©Ÿèƒ½

---

### ğŸ¥ˆ 2ä½: Email (Gmail API)
**ç·åˆè©•ä¾¡: â˜…â˜…â˜…â˜…â˜†**

#### ç†ç”±
- **å°å…¥ã‚³ã‚¹ãƒˆ**: ã‚¼ãƒ­(å…¨å“¡ãŒãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ä¿æœ‰)
- **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: å°(2-3æ™‚é–“)
- **é‹ç”¨ã‚³ã‚¹ãƒˆ**: ç„¡æ–™(Gmail APIã®å ´åˆ)
- **æ‡¸å¿µç‚¹**: å³æ™‚æ€§ãŒã‚„ã‚„åŠ£ã‚‹ã€è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«åˆ¤å®šãƒªã‚¹ã‚¯

#### é©ç”¨ã‚·ãƒ¼ãƒ³
- ç·Šæ€¥æ€§ã®ä½ã„é€šçŸ¥(1æ—¥1å›ã®ã‚µãƒãƒªãƒ¼ãªã©)
- LINE Notifyã¨ä½µç”¨ã—ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é€šçŸ¥å…ˆã¨ã™ã‚‹

---

### ğŸ¥‰ 3ä½: LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
**ç·åˆè©•ä¾¡: â˜…â˜…â˜…â˜†â˜†**

#### ç†ç”±
- **å°å…¥ã‚³ã‚¹ãƒˆ**: ä½(å‹ã ã¡è¿½åŠ ã®ã¿)
- **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: ä¸­(åŠæ—¥ç¨‹åº¦)
- **é‹ç”¨ã‚³ã‚¹ãƒˆ**: ç„¡æ–™æ å†…(æœˆ60é€šæƒ³å®š)
- **å°†æ¥æ€§**: åŒæ–¹å‘å¯¾å¿œã€ãƒªãƒƒãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¯¾å¿œã§æ‹¡å¼µæ€§ãŒé«˜ã„

#### é©ç”¨ã‚·ãƒ¼ãƒ³
- å°†æ¥çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¿”ä¿¡å¯¾å¿œã‚’è€ƒæ…®ã™ã‚‹å ´åˆ
- ã‚ˆã‚ŠãƒªãƒƒãƒãªUI/UXã‚’æä¾›ã—ãŸã„å ´åˆ

---

### âŒ æ¨å¥¨ã—ãªã„é¸æŠè‚¢

#### FCM (Firebase Cloud Messaging)
- **ç†ç”±**: å°‚ç”¨ã‚¢ãƒ—ãƒªé–‹ç™ºã‚³ã‚¹ãƒˆãŒé«˜ã™ãã‚‹
- **å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼**: 2åã®ã¿ã§ã€ROIãŒè¦‹åˆã‚ãªã„
- **åˆ¤æ–­åŸºæº–**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ãŒ100åä»¥ä¸Šã«ãªã£ãŸå ´åˆã«å†æ¤œè¨

#### SMS (Twilio)
- **ç†ç”±**: ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆãŒé«˜ã„(æœˆ420å††)
- **ä»£æ›¿æ¡ˆ**: LINE Notifyã§ç„¡æ–™å®Ÿç¾å¯èƒ½
- **åˆ¤æ–­åŸºæº–**: LINEãŒä½¿ãˆãªã„é«˜é½¢è€…å‘ã‘ãªã©ã€ç‰¹æ®Šã‚±ãƒ¼ã‚¹ã®ã¿

---

## å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—(ææ¡ˆ)

### Phase 1: LINE Notifyå®Ÿè£…(å„ªå…ˆåº¦: é«˜)
1. `LineNotifier`ã‚¯ãƒ©ã‚¹ã®ä½œæˆ(`v2/adapters/line_notify.py`)
2. ãƒˆãƒ¼ã‚¯ãƒ³è¨­å®šæ©Ÿèƒ½ã®è¿½åŠ (ç’°å¢ƒå¤‰æ•° or Google Sheets)
3. æ—¢å­˜`SlackNotifier`ã¨ä¸¦è¡Œç¨¼åƒ(ä¸¡æ–¹ã«é€šçŸ¥)
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆ(å¦»ãƒ»ç¥–æ¯ãŒãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œã€é€šçŸ¥å—ä¿¡ç¢ºèª)

**å·¥æ•°è¦‹ç©: 2-3æ™‚é–“**

### Phase 2: Emailå®Ÿè£…(å„ªå…ˆåº¦: ä¸­)
1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é€šçŸ¥å…ˆã¨ã—ã¦Emailè¿½åŠ 
2. Gmail APIèªè¨¼è¨­å®š
3. é€šçŸ¥é€ä¿¡å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®šæ©Ÿèƒ½

**å·¥æ•°è¦‹ç©: 3-4æ™‚é–“**

### Phase 3: é€šçŸ¥å…ˆé¸æŠæ©Ÿèƒ½(å„ªå…ˆåº¦: ä½)
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«é€šçŸ¥å…ˆã‚’é¸æŠå¯èƒ½ã«ã™ã‚‹
2. Google Sheetsã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«`notification_channels`ã‚«ãƒ©ãƒ è¿½åŠ 
3. è¤‡æ•°ãƒãƒ£ãƒ³ãƒãƒ«ã¸ã®ä¸¦è¡Œé€šçŸ¥å¯¾å¿œ

**å·¥æ•°è¦‹ç©: 2-3æ™‚é–“**

---

## æŠ€è¡“çš„è€ƒæ…®äº‹é …

### æ—¢å­˜ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®çµ±åˆ

ç¾åœ¨ã®`Notifier`ãƒãƒ¼ãƒˆ(v2/domain/ports.py)ã¯ä»¥ä¸‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹:

```python
class Notifier(ABC):
    @abstractmethod
    def notify_file_processed(
        self,
        filename: str,
        summary: str,
        events: list[EventData],
        tasks: list[TaskData],
        file_link: str = "",
    ) -> None:
        pass
```

**ã™ã¹ã¦ã®é¸æŠè‚¢ãŒã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«é©åˆå¯èƒ½**ã€‚å®Ÿè£…ä¾‹:

- `SlackNotifier` (æ—¢å­˜)
- `LineNotifier` (LINE Notify)
- `EmailNotifier` (Gmail API / SendGrid)
- `SMSNotifier` (Twilio / AWS SNS)
- `LineMessagingNotifier` (LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ)

### è¤‡æ•°é€šçŸ¥å…ˆã¸ã®å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³

#### ãƒ‘ã‚¿ãƒ¼ãƒ³A: Composite Pattern
```python
class MultiNotifier(Notifier):
    def __init__(self, notifiers: list[Notifier]):
        self._notifiers = notifiers

    def notify_file_processed(self, ...):
        for notifier in self._notifiers:
            try:
                notifier.notify_file_processed(...)
            except Exception as e:
                logger.error(f"Notification failed: {e}")
                # 1ã¤å¤±æ•—ã—ã¦ã‚‚ä»–ã¯ç¶™ç¶š
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³B: è¨­å®šãƒ™ãƒ¼ã‚¹
```python
# v2/config.py ã«è¿½åŠ 
notification_channels:
  - type: slack
    token: ${SLACK_BOT_TOKEN}
    channel_id: ${SLACK_CHANNEL_ID}
  - type: line_notify
    token: ${LINE_NOTIFY_TOKEN_WIFE}
  - type: line_notify
    token: ${LINE_NOTIFY_TOKEN_GRANDMA}
```

---

## ã¾ã¨ã‚

| é¸æŠè‚¢ | å°å…¥ | å®Ÿè£… | é‹ç”¨ | ç·åˆ | æ¨å¥¨åº¦ |
|--------|------|------|------|------|--------|
| LINE Notify | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | ğŸ¥‡ æœ€æ¨å¥¨ |
| Email (Gmail) | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜† | ğŸ¥ˆ æ¨å¥¨ |
| LINEå…¬å¼ | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜†â˜† | ğŸ¥‰ å°†æ¥æ€§ |
| SMS | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜† | â˜…â˜†â˜†â˜†â˜† | â˜…â˜…â˜†â˜†â˜† | âŒ éæ¨å¥¨ |
| FCM | â˜…â˜†â˜†â˜†â˜† | â˜…â˜†â˜†â˜†â˜† | â˜…â˜…â˜†â˜†â˜† | â˜…â˜†â˜†â˜†â˜† | âŒ éæ¨å¥¨ |

**æœ€çµ‚æ¨å¥¨**: Phase 1ã§LINE Notifyã‚’å®Ÿè£…ã—ã€Phase 2ã§Emailã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã—ã¦è¿½åŠ ã™ã‚‹æ§‹æˆãŒæœ€é©ã€‚
