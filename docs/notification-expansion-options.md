# é€šçŸ¥å…ˆæ‹¡å¤§ã®æŠ€è¡“çš„é¸æŠè‚¢

## èƒŒæ™¯

### ç¾çŠ¶ã®èª²é¡Œ
- ç¾åœ¨ã®é€šçŸ¥å…ˆ: Slacké™å®š
- å•é¡Œç‚¹: ãƒ¦ãƒ¼ã‚¶ãƒ¼æœ¬äººä»¥å¤–ãŒè¦‹ãªã„
- å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼: å¦»ã€ç¥–æ¯
- ä½¿ç”¨ç«¯æœ«: iPhone/Androidæ··åœ¨

### è¦ä»¶
1. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**: iOS/Androidä¸¡å¯¾å¿œ
2. **å°å…¥ã‚³ã‚¹ãƒˆã®ä½ã•**: æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç°¡å˜ã«åˆ©ç”¨é–‹å§‹ã§ãã‚‹
3. **é‹ç”¨ã‚³ã‚¹ãƒˆã®ä½ã•**: ä¿å®ˆãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå®¹æ˜“
4. **æ—¢å­˜å®Ÿè£…ã¨ã®çµ±åˆ**: ç¾åœ¨ã®`Notifier`ãƒãƒ¼ãƒˆ(v2/domain/ports.py)ã«æº–æ‹ 

---

## æŠ€è¡“é¸æŠè‚¢ã®æ¯”è¼ƒ

### 1. PWA (Progressive Web App) + Web Push

#### æ¦‚è¦
PWA(Progressive Web App)ã¨Web Push APIã‚’çµ„ã¿åˆã‚ã›ãŸé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã€‚ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ãŸWebã‚¢ãƒ—ãƒªã‹ã‚‰ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’é€ä¿¡ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ä¸è¦**: ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã™ã‚‹ã ã‘
- âœ… **å®Œå…¨ç„¡æ–™**: é–‹ç™ºè€…ç™»éŒ²æ–™ãªã—ã€é€šçŸ¥é€ä¿¡æ–™ãªã—
- âœ… **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS 16.4+/Androidå®Œå…¨å¯¾å¿œ
- âœ… **ãƒã‚¤ãƒ†ã‚£ãƒ–ç›¸å½“ã®ä½“é¨“**: ãƒ›ãƒ¼ãƒ ç”»é¢ã‚¢ã‚¤ã‚³ãƒ³ã€ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ
- âœ… **ä½å®Ÿè£…ã‚³ã‚¹ãƒˆ**: HTML/CSS/JavaScriptã®ã¿ã€Service Workerè¿½åŠ 
- âœ… **æŸ”è»ŸãªUI**: é€šçŸ¥ä¸€è¦§è¡¨ç¤ºã€æ—¢èª­ç®¡ç†ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã©è‡ªç”±ã«å®Ÿè£…å¯èƒ½
- âœ… **æ®µéšçš„ãªæ‹¡å¼µ**: æœ€åˆã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ã€å¾Œã‹ã‚‰åŒæ–¹å‘é€šçŸ¥ã‚„ãƒªãƒƒãƒUIã‚’è¿½åŠ å¯èƒ½

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âš ï¸ **ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ãŒå¿…è¦**: åˆå›ã®ã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€æ“ä½œãŒå¿…è¦
- âš ï¸ **é€šçŸ¥è¨±å¯ãŒå¿…è¦**: ãƒ–ãƒ©ã‚¦ã‚¶ã®é€šçŸ¥è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨±å¯ã™ã‚‹å¿…è¦ã‚ã‚Š
- âš ï¸ **iOSåˆ¶é™**: iOS 16.4æœªæº€ã§ã¯å‹•ä½œã—ãªã„(2026å¹´ç¾åœ¨ã¯ã»ã¼å•é¡Œãªã—)
- âš ï¸ **ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åˆ¶ç´„**: iOSã§ã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã‚ˆã‚Šåˆ¶ç´„ãŒå¤šã„(Time Sensitiveãªã—)

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜…â˜†â˜† (ä¸­ç¨‹åº¦)**

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (PWA)**:
```javascript
// service-worker.js
self.addEventListener('push', (event) => {
  const data = event.data.json();
  self.registration.showNotification(data.title, {
    body: data.body,
    icon: '/icon.png',
    badge: '/badge.png',
    data: data
  });
});

// app.js - é€šçŸ¥è³¼èª­
const registration = await navigator.serviceWorker.register('/sw.js');
const subscription = await registration.pushManager.subscribe({
  userVisibleOnly: true,
  applicationServerKey: VAPID_PUBLIC_KEY
});
// subscriptionæƒ…å ±ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
```

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Python)**:
```python
from pywebpush import webpush

class PWANotifier(Notifier):
    def __init__(self, vapid_private_key: str, vapid_claims: dict, subscriptions: list[dict]):
        self._vapid_key = vapid_private_key
        self._vapid_claims = vapid_claims
        self._subscriptions = subscriptions

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        payload = {
            "title": f"ğŸ“„ {filename} å‡¦ç†å®Œäº†",
            "body": summary,
            "events": len(events),
            "tasks": len(tasks),
            "link": file_link
        }
        for subscription in self._subscriptions:
            webpush(
                subscription_info=subscription,
                data=json.dumps(payload),
                vapid_private_key=self._vapid_key,
                vapid_claims=self._vapid_claims
            )
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- **é–‹ç™ºè€…ç™»éŒ²æ–™**: ãªã—
- **é€šçŸ¥é€ä¿¡æ–™**: å®Œå…¨ç„¡æ–™(FCMã‚’ä½¿ã†å ´åˆã‚‚ç„¡æ–™æ ã§ååˆ†)
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Cloud Run/Vercel/Netlifyãªã©ã§ç„¡æ–™æ å†…ã§é‹ç”¨å¯èƒ½
- **ä¿å®ˆ**: Webã‚¢ãƒ—ãƒªãªã®ã§ä¸€åº¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚Œã°è‡ªå‹•æ›´æ–°ã€ã‚¢ãƒ—ãƒªå¯©æŸ»ãªã—

#### åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †(ãƒ¦ãƒ¼ã‚¶ãƒ¼å´)
1. ãƒ–ãƒ©ã‚¦ã‚¶(Safari/Chrome)ã§PWAã®URLã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—(iOSã¯ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³â†’ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€)
3. ã‚¢ãƒ—ãƒªã‚’é–‹ã„ã¦ã€Œé€šçŸ¥ã‚’è¨±å¯ã€ã‚’ã‚¿ãƒƒãƒ—
4. å®Œäº†!ä»¥é™ã€é€šçŸ¥ãŒå±Šã

---

### 2. Firebase Cloud Messaging (FCM) - ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒª

#### æ¦‚è¦
GoogleãŒæä¾›ã™ã‚‹ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **å®Œå…¨ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS/Android/Webå¯¾å¿œ
- âœ… **ç„¡æ–™**: åˆ¶é™ãªãç„¡æ–™åˆ©ç”¨å¯èƒ½
- âœ… **é«˜åº¦ãªæ©Ÿèƒ½**: ãƒªãƒƒãƒé€šçŸ¥ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãªã©
- âœ… **ä¿¡é ¼æ€§**: Googleã®ã‚¤ãƒ³ãƒ•ãƒ©ã§é«˜å¯ç”¨æ€§
- âœ… **ãƒˆãƒ”ãƒƒã‚¯æ©Ÿèƒ½**: è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ä¸€æ–‰é…ä¿¡ãŒå®¹æ˜“

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **å°‚ç”¨ã‚¢ãƒ—ãƒªãŒå¿…è¦**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªé–‹ç™ºãŒå¿…é ˆ
- âŒ **å°å…¥ã‚³ã‚¹ãƒˆé«˜**: ã‚¢ãƒ—ãƒªé–‹ç™ºãƒ»é…å¸ƒãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦
- âŒ **æŠ€è¡“çš„ãƒãƒ¼ãƒ‰ãƒ«é«˜**: iOS(APNsè¨¼æ˜æ›¸)ã€Androidè¨­å®šãŒå¿…è¦
- âŒ **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•™è‚²ã‚³ã‚¹ãƒˆ**: ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»é€šçŸ¥è¨±å¯ã®èª¬æ˜ãŒå¿…è¦
- âš ï¸ **ä¿å®ˆã‚³ã‚¹ãƒˆ**: ã‚¢ãƒ—ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€OSå¯¾å¿œãŒç¶™ç¶šçš„ã«å¿…è¦

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜…â˜…â˜… (éå¸¸ã«å›°é›£)**

- ã‚µãƒ¼ãƒãƒ¼å´: Python SDKã§å®Ÿè£…å¯èƒ½(ä¸­ç¨‹åº¦)
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: Swift(iOS) + Kotlin(Android)ã®2ç¨®é¡ã®ã‚¢ãƒ—ãƒªé–‹ç™ºãŒå¿…é ˆ
- é…å¸ƒ: Apple Developer Program($99/å¹´) + Google Play Console($25è²·ã„åˆ‡ã‚Š)

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- ã‚¢ãƒ—ãƒªä¿å®ˆ: OSã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¯¾å¿œã€ãƒã‚°ä¿®æ­£
- è¨¼æ˜æ›¸ç®¡ç†: APNsè¨¼æ˜æ›¸ã®æ›´æ–°(å¹´1å›)
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆ: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

### 3. SMS (Twilio / AWS SNS)

#### æ¦‚è¦
é›»è©±ç•ªå·ã¸ã®SMSé€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **å°å…¥ã‚³ã‚¹ãƒˆæ¥µå°**: é›»è©±ç•ªå·ã®ã¿ã§åˆ©ç”¨å¯èƒ½
- âœ… **ç¢ºå®Ÿãªåˆ°é”**: ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã€å¿…ãšå±Šã
- âœ… **å®Œå…¨ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: ã™ã¹ã¦ã®æºå¸¯ç«¯æœ«ã§å—ä¿¡å¯èƒ½
- âœ… **é«˜ã„é–‹å°ç‡**: SMSã®é–‹å°ç‡ã¯98%ã¨é«˜ã„

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **ã‚³ã‚¹ãƒˆãŒé«˜ã„**: 1é€šã‚ãŸã‚Š7-10å††ç¨‹åº¦(Twilioæ—¥æœ¬å›½å†…)
- âŒ **æ–‡å­—æ•°åˆ¶é™**: å…¨è§’70æ–‡å­—ã¾ã§(è¤‡æ•°SMSã«ã™ã‚‹ã¨é«˜é¡åŒ–)
- âŒ **ãƒªãƒƒãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸å¯**: ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã€ãƒªãƒ³ã‚¯ã‚‚çŸ­ç¸®å¿…é ˆ
- âŒ **é›»è©±ç•ªå·ç®¡ç†**: ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æƒ…å ±ã®å–ã‚Šæ‰±ã„ã«æ³¨æ„

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜†â˜†â˜† (å®¹æ˜“)**

```python
class TwilioSMSNotifier(Notifier):
    def __init__(self, account_sid: str, auth_token: str, from_number: str, to_numbers: list[str]):
        self._client = Client(account_sid, auth_token)
        self._from_number = from_number
        self._to_numbers = to_numbers

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        # 70æ–‡å­—ä»¥å†…ã«è¦ç´„
        message = f"{filename}å‡¦ç†å®Œäº†ã€‚{len(events)}ä»¶ã‚¤ãƒ™ãƒ³ãƒˆã€{len(tasks)}ä»¶ã‚¿ã‚¹ã‚¯ä½œæˆã€‚"
        for to_number in self._to_numbers:
            self._client.messages.create(
                body=message,
                from_=self._from_number,
                to=to_number
            )
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- **Twilio**: æœˆé¡æ–™é‡‘ãªã—ã€å¾“é‡èª²é‡‘(1é€šç´„7å††)
- **AWS SNS**: 1é€šç´„10å††ã€AWSåˆ©ç”¨æ–™ãŒåˆ¥é€”ç™ºç”Ÿ
- **æœˆé–“æƒ³å®šã‚³ã‚¹ãƒˆ**: 1æ—¥1é€šÃ—30æ—¥Ã—2äºº=420å††/æœˆ

---

### 4. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (Messaging API)

#### æ¦‚è¦
LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€Messaging APIã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **LINE Notifyã‚ˆã‚Šé«˜æ©Ÿèƒ½**: ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã€ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ—ãƒ©ã‚¤ãªã©
- âœ… **åŒæ–¹å‘å¯¾å¿œå¯**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¿”ä¿¡ã‚’å—ä¿¡ãƒ»å‡¦ç†å¯èƒ½
- âœ… **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iOS/Androidå®Œå…¨å¯¾å¿œ
- âœ… **å°å…¥ã‚³ã‚¹ãƒˆä½**: LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚Œã°å‹ã ã¡è¿½åŠ ã®ã¿

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
- âŒ **ç„¡æ–™æ ãŒé™å®šçš„**: æœˆ200é€šã¾ã§ç„¡æ–™ã€ä»¥é™ã¯å¾“é‡èª²é‡‘
- âŒ **åˆæœŸè¨­å®šãŒè¤‡é›‘**: LINE Developersç™»éŒ²ã€Webhookã‚µãƒ¼ãƒãƒ¼è¨­å®šãªã©
- âŒ **å‹ã ã¡è¿½åŠ ãŒå¿…è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‹ã ã¡è¿½åŠ ã™ã‚‹æ‰‹é–“
- âš ï¸ **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡åˆ¶é™**: ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆé…ä¿¡ã¯æœ‰æ–™ãƒ—ãƒ©ãƒ³ã®ã¿

#### å®Ÿè£…ã®é›£æ˜“åº¦
**â˜…â˜…â˜…â˜†â˜† (ä¸­ç¨‹åº¦)**

```python
class LineMessagingNotifier(Notifier):
    def __init__(self, channel_access_token: str, user_ids: list[str]):
        self._api = LineBotApi(channel_access_token)
        self._user_ids = user_ids

    def notify_file_processed(self, filename, summary, events, tasks, file_link):
        # Flex Messageã§è¦‹ã‚„ã™ãæ•´å½¢å¯èƒ½
        message = self._build_flex_message(filename, summary, events, tasks, file_link)
        for user_id in self._user_ids:
            self._api.push_message(user_id, message)
```

#### é‹ç”¨ã‚³ã‚¹ãƒˆ
- æœˆ200é€šã¾ã§ç„¡æ–™
- 201é€šä»¥é™: ~5å††/é€š(å¾“é‡èª²é‡‘)
- **æœˆé–“æƒ³å®šã‚³ã‚¹ãƒˆ**: 1æ—¥1é€šÃ—30æ—¥Ã—2äºº=60é€š â†’ ç„¡æ–™æ å†…

---

## æ¨å¥¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°

### ğŸ¥‡ 1ä½: PWA (Progressive Web App) + Web Push
**ç·åˆè©•ä¾¡: â˜…â˜…â˜…â˜…â˜…**

#### ç†ç”±
- **å°å…¥ã‚³ã‚¹ãƒˆ**: æ¥µå°(ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹â†’ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ã®ã¿)
- **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: ä¸­ç¨‹åº¦(1-2æ—¥ã§å®Œæˆã€ãƒ•ãƒ­ãƒ³ãƒˆ+ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)
- **é‹ç”¨ã‚³ã‚¹ãƒˆ**: å®Œå…¨ç„¡æ–™ã€ã‚¢ãƒ—ãƒªå¯©æŸ»ãªã—ã€è‡ªå‹•æ›´æ–°
- **æ‹¡å¼µæ€§**: é€šçŸ¥ä¸€è¦§ã€æ—¢èª­ç®¡ç†ã€åŒæ–¹å‘å¯¾å¿œãªã©è‡ªç”±ã«æ‹¡å¼µå¯èƒ½
- **è‡ªå·±å®Œçµ**: å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ä¾å­˜ãªã—ã€ã™ã¹ã¦è‡ªåˆ†ã§ç®¡ç†

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã®åˆæœŸè¨­å®šæ‰‹é †
1. Safariã¾ãŸã¯Chromeã§PWAã®URLã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—(iOS: ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³â†’ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€)
3. ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ã‚¢ãƒ—ãƒªã‚’é–‹ã
4. ã€Œé€šçŸ¥ã‚’è¨±å¯ã€ã‚’ã‚¿ãƒƒãƒ—
5. å®Œäº†!(ä»¥é™ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãŒå±Šã)

#### å®Ÿè£…ã‚¿ã‚¹ã‚¯(åˆ¥é€”å®šç¾©)
**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**:
- PWAåŸºæœ¬æ§‹æˆ(manifest.json, service-worker.js)
- é€šçŸ¥è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã€è³¼èª­æƒ…å ±ã®é€ä¿¡
- é€šçŸ¥å—ä¿¡æ™‚ã®è¡¨ç¤ºå‡¦ç†
- é€šçŸ¥ä¸€è¦§ç”»é¢(ä»»æ„)

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**:
- `PWANotifier`ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…(`v2/adapters/pwa_notifier.py`)
- VAPIDéµç”Ÿæˆãƒ»ç®¡ç†
- è³¼èª­æƒ…å ±ã®ä¿å­˜(Google Sheets or Firestore)
- pywebpushãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã®ãƒ—ãƒƒã‚·ãƒ¥é€ä¿¡

**å·¥æ•°è¦‹ç©: 1-2æ—¥(ãƒ•ãƒ­ãƒ³ãƒˆåŠæ—¥ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŠæ—¥ã€ãƒ†ã‚¹ãƒˆåŠæ—¥)**

---

### ğŸ¥ˆ 2ä½: LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (Messaging API)
**ç·åˆè©•ä¾¡: â˜…â˜…â˜…â˜†â˜†**

#### ç†ç”±
- **å°å…¥ã‚³ã‚¹ãƒˆ**: ä½(å‹ã ã¡è¿½åŠ ã®ã¿)
- **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: ä¸­(åŠæ—¥ç¨‹åº¦)
- **é‹ç”¨ã‚³ã‚¹ãƒˆ**: ç„¡æ–™æ å†…(æœˆ60é€šæƒ³å®š)
- **å°†æ¥æ€§**: åŒæ–¹å‘å¯¾å¿œã€ãƒªãƒƒãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¯¾å¿œã§æ‹¡å¼µæ€§ãŒé«˜ã„
- **æ‡¸å¿µç‚¹**: æœˆ200é€šåˆ¶é™ã€ä»¥é™ã¯å¾“é‡èª²é‡‘

#### é©ç”¨ã‚·ãƒ¼ãƒ³
- PWAå®Ÿè£…ã¾ã§ã®æš«å®šå¯¾å¿œã¨ã—ã¦
- å°†æ¥çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¿”ä¿¡å¯¾å¿œã‚’è€ƒæ…®ã™ã‚‹å ´åˆ
- LINEã‚¢ãƒ—ãƒªå†…ã§å®Œçµã—ãŸã„å ´åˆ

---

### âŒ æ¨å¥¨ã—ãªã„é¸æŠè‚¢

#### LINE Notify
- **ç†ç”±**: 2025å¹´3æœˆ31æ—¥ã«ã‚µãƒ¼ãƒ“ã‚¹çµ‚äº†æ¸ˆã¿
- **ä»£æ›¿**: LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ(Messaging API)ã¾ãŸã¯PWA

#### FCM (ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒª)
- **ç†ç”±**: å°‚ç”¨ã‚¢ãƒ—ãƒªé–‹ç™ºã‚³ã‚¹ãƒˆãŒé«˜ã™ãã‚‹(Swift + Kotlin)
- **å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼**: 2åã®ã¿ã§ã€ROIãŒè¦‹åˆã‚ãªã„
- **ä»£æ›¿**: PWAã§åŒç­‰ã®ä½“é¨“ã‚’ä½ã‚³ã‚¹ãƒˆã§å®Ÿç¾å¯èƒ½

#### SMS (Twilio)
- **ç†ç”±**: ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆãŒé«˜ã„(æœˆ420å††)
- **ä»£æ›¿**: PWAã§ç„¡æ–™å®Ÿç¾å¯èƒ½
- **åˆ¤æ–­åŸºæº–**: LINEã‚‚PWAã‚‚ä½¿ãˆãªã„é«˜é½¢è€…å‘ã‘ãªã©ã€ç‰¹æ®Šã‚±ãƒ¼ã‚¹ã®ã¿

---

## å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—(ææ¡ˆ)

### Phase 1: PWAåŸºæœ¬å®Ÿè£…(å„ªå…ˆåº¦: é«˜)
1. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹ç¯‰**
   - PWAåŸºæœ¬æ§‹æˆ: `manifest.json`, `service-worker.js`
   - é€šçŸ¥è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”»é¢
   - ãƒ—ãƒƒã‚·ãƒ¥è³¼èª­æƒ…å ±ã®é€ä¿¡å‡¦ç†
   - ã‚·ãƒ³ãƒ—ãƒ«ãªUI(é€šçŸ¥è¨±å¯ãƒœã‚¿ãƒ³ã®ã¿)

2. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…**
   - `PWANotifier`ã‚¯ãƒ©ã‚¹ã®ä½œæˆ(`v2/adapters/pwa_notifier.py`)
   - VAPIDéµç”Ÿæˆãƒ»ç’°å¢ƒå¤‰æ•°è¨­å®š
   - è³¼èª­æƒ…å ±ã®ä¿å­˜(Google Sheetsè¿½åŠ ã‚«ãƒ©ãƒ  or Firestore)
   - pywebpushã§ã®ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡

3. **ãƒ‡ãƒ—ãƒ­ã‚¤**
   - Cloud Run / Vercel / Netlifyã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
   - HTTPSå¿…é ˆ(Let's Encryptã§ç„¡æ–™SSL)

4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆ**
   - å¦»ãƒ»ç¥–æ¯ã«URLã‚’å…±æœ‰â†’ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ â†’é€šçŸ¥è¨±å¯
   - ãƒ†ã‚¹ãƒˆé€šçŸ¥é€ä¿¡ã€å—ä¿¡ç¢ºèª

**å·¥æ•°è¦‹ç©: 1-2æ—¥**

### Phase 2: é€šçŸ¥å±¥æ­´ãƒ»æ—¢èª­ç®¡ç†(å„ªå…ˆåº¦: ä¸­)
1. é€šçŸ¥ä¸€è¦§ç”»é¢ã®è¿½åŠ 
2. æ—¢èª­/æœªèª­ç®¡ç†
3. é€šçŸ¥ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°(ã‚¤ãƒ™ãƒ³ãƒˆ/ã‚¿ã‚¹ã‚¯)
4. é€šçŸ¥ã‹ã‚‰Google Calendar/Todoistã¸ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯

**å·¥æ•°è¦‹ç©: 1æ—¥**

### Phase 3: ãƒªãƒƒãƒé€šçŸ¥ãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ(å„ªå…ˆåº¦: ä½)
1. ãƒªãƒƒãƒé€šçŸ¥(ç”»åƒã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³)
2. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®é€šçŸ¥ã‚­ãƒ¥ãƒ¼
3. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åŒæœŸ
4. ã‚¢ãƒ—ãƒªå†…ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

**å·¥æ•°è¦‹ç©: 1-2æ—¥**

---

## æŠ€è¡“çš„è€ƒæ…®äº‹é …

### æ—¢å­˜ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®çµ±åˆ

ç¾åœ¨ã®`Notifier`ãƒãƒ¼ãƒˆ(v2/domain/ports.py)ã¯ä»¥ä¸‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹:

```python
class Notifier(ABC):
    @abstractmethod
    def notify_file_processed(
        self,
        filename: str,
        summary: str,
        events: list[EventData],
        tasks: list[TaskData],
        file_link: str = "",
    ) -> None:
        pass
```

**ã™ã¹ã¦ã®é¸æŠè‚¢ãŒã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«é©åˆå¯èƒ½**ã€‚å®Ÿè£…ä¾‹:

- `SlackNotifier` (æ—¢å­˜)
- `PWANotifier` (PWA + Web Push)
- `LineMessagingNotifier` (LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ)
- `SMSNotifier` (Twilio / AWS SNS)

### è¤‡æ•°é€šçŸ¥å…ˆã¸ã®å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³

#### ãƒ‘ã‚¿ãƒ¼ãƒ³A: Composite Pattern
```python
class MultiNotifier(Notifier):
    def __init__(self, notifiers: list[Notifier]):
        self._notifiers = notifiers

    def notify_file_processed(self, ...):
        for notifier in self._notifiers:
            try:
                notifier.notify_file_processed(...)
            except Exception as e:
                logger.error(f"Notification failed: {e}")
                # 1ã¤å¤±æ•—ã—ã¦ã‚‚ä»–ã¯ç¶™ç¶š
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³B: è¨­å®šãƒ™ãƒ¼ã‚¹
```python
# v2/config.py ã«è¿½åŠ 
notification_channels:
  - type: slack
    token: ${SLACK_BOT_TOKEN}
    channel_id: ${SLACK_CHANNEL_ID}
  - type: pwa
    vapid_private_key: ${VAPID_PRIVATE_KEY}
    subscriptions_source: google_sheets  # or firestore
```

---

## ã¾ã¨ã‚

| é¸æŠè‚¢ | å°å…¥ | å®Ÿè£… | é‹ç”¨ | ç·åˆ | æ¨å¥¨åº¦ |
|--------|------|------|------|------|--------|
| PWA + Web Push | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | ğŸ¥‡ æœ€æ¨å¥¨ |
| LINEå…¬å¼ | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜†â˜† | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜†â˜† | ğŸ¥ˆ æš«å®šå¯¾å¿œ |
| SMS | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜† | â˜…â˜†â˜†â˜†â˜† | â˜…â˜…â˜†â˜†â˜† | âŒ éæ¨å¥¨ |
| FCMãƒã‚¤ãƒ†ã‚£ãƒ– | â˜…â˜†â˜†â˜†â˜† | â˜…â˜†â˜†â˜†â˜† | â˜…â˜…â˜†â˜†â˜† | â˜…â˜†â˜†â˜†â˜† | âŒ éæ¨å¥¨ |

**æœ€çµ‚æ¨å¥¨**: PWAã‚’ãƒ¡ã‚¤ãƒ³é€šçŸ¥å…ˆã¨ã—ã¦å®Ÿè£…ã€‚å°å…¥ã¾ã§ã®æš«å®šå¯¾å¿œã¨ã—ã¦LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¤œè¨ã€‚

---

## å‚è€ƒè³‡æ–™

### PWA + Web Push
- [How to Set Up Push Notifications for Your PWA (iOS and Android)](https://www.mobiloud.com/blog/pwa-push-notifications)
- [Using Push Notifications in PWAs: The Complete Guide](https://www.magicbell.com/blog/using-push-notifications-in-pwas)
- [Do Progressive Web Apps Work on iOS? The Complete Guide for 2026](https://www.mobiloud.com/blog/progressive-web-apps-ios)

### LINE Notifyçµ‚äº†é–¢é€£
- [LINE Notifyçµ‚äº†ã®è¡æ’ƒ!LINE Works APIã§Botç§»è¡Œã‚’è©¦ã¿ãŸé¡›æœ«](https://zenn.dev/ncdc/articles/90c6302a1b949a)
- [line notifyã®ã‚µãƒ¼ãƒ“ã‚¹çµ‚äº†ç†ç”±ã¨ä»£æ›¿é€šçŸ¥æ–¹æ³•ã‚’å¾¹åº•æ¯”è¼ƒ!](https://assist-all.co.jp/column/line/20250611-5167/)

### LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ–™é‡‘
- [ã€2026å¹´æœ€æ–°ã€‘LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚’è§£èª¬](https://line-sm.com/blog/line-official-2023-price-update/)
